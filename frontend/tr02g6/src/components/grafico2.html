<!DOCTYPE html>
<div id="container"></div>
<script type="module">
    import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";
    // Configuración básica
    const width = 600;
    const height = width;

    // Nodo central
    const centerNode = {
        id: 0,
        name: "alumno",
        x: width / 2,
        y: height / 2,
        r: 50
    };
    const outerCircles = [
        { x: 150, y: 150, r: 40 },
        { x: 450, y: 150, r: 40 },
        { x: 150, y: 450, r: 40 },
        { x: 450, y: 450, r: 40 }
    ];

    // Bolitas internas con valores predefinidos
    const innerBubbles = [
        { r: 8 },  // Primer conjunto de bolitas
        { r: 6 },
        { r: 10 },
        { r: 7 }
    ];
    // Datos con posiciones fijas alrededor del centro
    const data = [
        { id: 1, x: 200, y: 200, r: 60 },
        { id: 2, x: 400, y: 200, r: 60 },
        { id: 3, x: 200, y: 400, r: 60 },
        { id: 4, x: 400, y: 400, r: 60 },
    ];

    // Crear SVG
    const svg = d3.select("body")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

    // Dibujar líneas entre el nodo central y las burbujas
    svg.selectAll(".line")
        .data(data)
        .enter()
        .append("line")
        .attr("class", "line")
        .attr("x1", centerNode.x)
        .attr("y1", centerNode.y)
        .attr("x2", d => d.x)
        .attr("y2", d => d.y)
        .style("stroke", "gray")
        .style("stroke-width", "1px");

    // Dibujar el nodo central
    svg.append("circle")
        //.attr("class", "center")
        .attr("cx", centerNode.x)
        .attr("cy", centerNode.y)
        .attr("r", centerNode.r)
        .style("fill", "orange")
        .style("stroke", "black");

    // Dibujar burbujas
    svg.selectAll(".outer-circle")
        .data(outerCircles)
        .enter()
        .append("circle")
        .attr("cx", d => d.x)
        .attr("cy", d => d.y)
        .attr("r", d => d.r)
        .style("fill", "lightblue")
        .style("stroke", "black");

    svg.selectAll(".inner-bubble")
        .data(innerBubbles)
        .enter()
        .append("circle")
        .attr("cx", (d, i) => {
            // Para cada círculo externo, distribuimos las bolitas
            const outerCircle = outerCircles[i];
            const numBubbles = 5; // Número de bolitas por círculo
            const angleStep = (2 * Math.PI) / numBubbles; // Ángulo entre bolitas
            return outerCircle.x + Math.cos(i * angleStep) * (outerCircle.r - d.r);
        })
        .attr("cy", (d, i) => {
            const outerCircle = outerCircles[i];
            const numBubbles = 5;
            const angleStep = (2 * Math.PI) / numBubbles;
            return outerCircle.y + Math.sin(i * angleStep) * (outerCircle.r - d.r);
        })
        .attr("r", d => d.r)
        .style("fill", "pink")
        .style("stroke", "black");
    // Agregar etiqueta al nodo central
    svg.append("text")
        .attr("x", centerNode.x)
        .attr("y", centerNode.y)
        .attr("dy", ".35em")
        .attr("text-anchor", "middle")
        .text(centerNode.name)
        .style("fill", "white")
        .style("font-size", "14px");

    // Agregar etiquetas de texto con los números
    svg.selectAll(".label")
        .data(data)
        .enter()
        .append("text")
        .attr("x", d => d.x)
        .attr("y", d => d.y)
        .attr("dy", ".35em")
        .attr("text-anchor", "middle")
        .text(d => d.r) // Mostrar el valor del número
        .style("fill", "white")
        .style("font-size", "12px");
</script>
<style>
    .bubble {
        fill: steelblue;
        stroke: black;
        stroke-width: 1px;
    }

    .line {
        stroke: gray;
        stroke-width: 1px;
    }

    .center {
        fill: orange;
        stroke: black;
        stroke-width: 2px;
    }
</style>